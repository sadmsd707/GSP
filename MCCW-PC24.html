<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MHT-CET Quiz</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #e0f2fe;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    .quiz-container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 20px 25px;
      position: relative;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 14px;
      color: #1e3a8a;
    }
    .header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .header-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .question-number {
      font-weight: bold;
      color: #2563eb;
    }
    .question {
      font-size: 16px;
      margin: 20px 0;
    }
    .options input[type="radio"] {
      display: none;
    }
    .options label {
      display: block;
      background: #eff6ff;
      margin: 8px 0;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      border-left: 4px solid transparent;
    }
    .options input[type="radio"]:checked + label {
      background: #dbeafe;
      border-left: 4px solid #2563eb;
      font-weight: 500;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .btn {
      padding: 10px 20px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
    }
    .btn:hover {
      background: #1e40af;
    }
    .btn.right {
      margin-left: auto;
    }
    
    /* Timer Styling */
    .timer {
      display: flex;
      align-items: center;
      gap: 5px;
      background: #eff6ff;
      padding: 5px 10px;
      border-radius: 4px;
      font-weight: 500;
    }
    
    /* Question Navigation Panel */
    .nav-panel-toggle {
      cursor: pointer;
      font-size: 20px;
      z-index: 10;
      background: #eff6ff;
      padding: 5px 10px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .nav-panel {
      display: none;
      position: absolute;
      top: 50px;
      right: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      padding: 15px;
      z-index: 10;
      width: 250px;
      max-height: 300px;
      overflow-y: auto;
    }
    .nav-panel h3 {
      margin: 0 0 10px 0;
      font-size: 16px;
      color: #2563eb;
      border-bottom: 1px solid #eee;
      padding-bottom: 5px;
    }
    .question-list {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
    }
    .question-item {
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }
    .question-item.answered {
      background: #3b82f6;
      color: white;
    }
    .question-item.seen {
      background: #f87171;
      color: white;
    }
    .question-item.not-seen {
      background: #d1d5db;
      color: #6b7280;
    }
    .question-item.current {
      border: 2px solid #2563eb;
      box-sizing: border-box;
    }
    .question-item:hover {
      transform: scale(1.1);
    }
    
    /* Save notification */
    .save-notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #3b82f6;
      color: white;
      padding: 12px 20px;
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
      display: none;
      align-items: center;
      gap: 10px;
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <div class="header">
      <div class="header-left">
        <div>MHT CET 2025 · Electromagnetic Waves</div>
      </div>
      <div class="header-right">
        <div class="timer">Time: <span id="timer">00:00</span></div>
        <div class="nav-panel-toggle" onclick="toggleNavPanel()">☰</div>
      </div>
    </div>
    
    <div class="nav-panel" id="navPanel">
      <h3>Questions</h3>
      <div class="question-list" id="questionList"></div>
    </div>

    <div id="quiz-content"></div>
    
    <div class="nav-buttons">
      <button class="btn" id="backBtn" onclick="prevQuestion()" style="display:none;">Back</button>
      <button class="btn right" id="nextBtn" onclick="nextQuestion()">Next</button>
      <button class="btn right" id="submitBtn" onclick="submitQuiz()" style="display:none;">Submit</button>
    </div>
  </div>

  <!-- Save notification -->
  <div class="save-notification" id="saveNotification">
    <span>Results saved successfully!</span>
    <button onclick="hideNotification()" style="background: none; border: none; color: white; cursor: pointer; font-size: 16px;">×</button>
  </div>

  <script>
    const questions = [
      {
        number: "Question 01",
        text: "A parallel plate capacitor with plate area A and plate separation d is charged by constant current I. A plane surface of area A/2, parallel to the plates is drawn simultaneously between the plates. The displacement current through this area is",
        options: ["I", "I/2", "I/4", "2I"],
        correct: "B"
      },
      {
        number: "Question 02",
        text: "Select the 'WRONG' statement out of the following.",
        options: [
          "Electromagnetic waves do not require any medium for their propagation.",
          "Material medium is necessary for propagation of electromagnetic waves.",
          "Electromagnetic waves can travel through vacuum waves speed of light",
          "Electromagnetic waves are transverse in nature."
        ],
        correct: "B"
      },
      {
        number: "Question 03",
        text: "An electromagnetic wave, whose wave normal makes an angle of 45° with the vertical, travelling in air strikes a horizontal liquid surface. While travelling through the liquid it gets deviated through 15°. What is the speed of the electromagnetic wave in the liquid, if the speed of electromagnetic wave in air is 3 × 10^8 m/s? (sin 30° = 0.5, sin 45° = 1/√2)",
        options: ["1.5 × 10^8 m/s", "2.12 × 10^8 m/s", "2.5 × 10^8 m/s", "3 × 10^8 m/s"],
        correct: "B"
      },
      {
        number: "Question 04",
        text: "Which one of the following statements is not the property of light?",
        options: [
          "Light requires material medium.",
          "Light has finite speed.",
          "Light can travel through vacuum.",
          "Light involves transportation of energy."
        ],
        correct: "A"
      },
      {
        number: "Question 05",
        text: "If ε₀ and ε represent the permittivity of free space and absolute permittivity of a medium then the relative permittivity of the medium is",
        options: ["ε₀/ε", "ε/ε₀", "ε₀ε", "1/ε₀ε"],
        correct: "B"
      },
      {
        number: "Question 06",
        text: "Out of the fundamental forces in nature, maximum and minimum range is respectively for",
        options: [
          "Gravitational force and weak nuclear force",
          "Electromagnetic force and strong nuclear force",
          "Gravitational force and strong nuclear force",
          "Weak nuclear force and electromagnetic force"
        ],
        correct: "A"
      },
      {
        number: "Question 07",
        text: "In which layer of the atmosphere, the water vapour is present?",
        options: ["Troposphere", "Stratosphere", "Mesosphere", "Thermosphere"],
        correct: "A"
      },
      {
        number: "Question 08",
        text: "Which one of the following statements is 'NOT' the property of light?",
        options: [
          "Light involves transportation of energy.",
          "Light has finite speed.",
          "Light requires material medium for propagation.",
          "Light can travel through vacuum."
        ],
        correct: "C"
      },
      {
        number: "Question 09",
        text: "An electromagnetic wave of wavelength 'λ' is incident on a photosensitive surface of negligible work function. If the photoelectrons emitted from this surface have the de-Broglie wavelength 'λ₁' then",
        options: ["λ₁ ∝ λ", "λ₁ ∝ √λ", "λ₁ ∝ 1/λ", "λ₁ ∝ 1/√λ"],
        correct: "B"
      },
      {
        number: "Question 10",
        text: "Which of the following is not an electromagnetic wave?",
        options: ["X-rays", "Gamma rays", "Cathode rays", "Radio waves"],
        correct: "C"
      },
      {
        number: "Question 11",
        text: "Electromagnetic waves of wavelength ranging from 100Å to 400Å comes under",
        options: ["X-rays", "Ultraviolet rays", "Infrared rays", "Visible light"],
        correct: "B"
      },
      {
        number: "Question 12",
        text: "Electromagnetic theory suggests that the light consists of",
        options: [
          "Electric field only",
          "Magnetic field only",
          "Both electric and magnetic fields",
          "Neither electric nor magnetic field"
        ],
        correct: "C"
      },
      {
        number: "Question 13",
        text: "The frequency of radio waves corresponding to a wavelength of 10 m is",
        options: ["3 × 10^7 Hz", "3 × 10^8 Hz", "3 × 10^9 Hz", "3 × 10^10 Hz"],
        correct: "A"
      },
      {
        number: "Question 14",
        text: "The electromagnetic waves travel in free space with the velocity of",
        options: ["Sound", "Light", "Greater than light", "Less than light"],
        correct: "B"
      },
      {
        number: "Question 15",
        text: "The existence of electromagnetic waves were experimentally confirmed by",
        options: ["Maxwell", "Hertz", "Faraday", "Ampere"],
        correct: "B"
      },
      {
        number: "Question 16",
        text: "Which of the following is absorbed by the ozone layer?",
        options: ["Infrared rays", "Ultraviolet rays", "X-rays", "Gamma rays"],
        correct: "B"
      },
      {
        number: "Question 17",
        text: "The velocity of electromagnetic radiation in a medium of permittivity ε₀ and permeability μ₀ is given by",
        options: ["1/√(ε₀μ₀)", "√(ε₀μ₀)", "ε₀μ₀", "1/(ε₀μ₀)"],
        correct: "A"
      }
    ];

    let current = 0;
    const userAnswers = {};
    const seenQuestions = new Set();
    const startTime = new Date();
    let navPanelVisible = false;

    function renderQuestion(index) {
      const q = questions[index];
      const container = document.getElementById("quiz-content");
      container.innerHTML = `
        <div class="question-number">${q.number}</div>
        <div class="question">${q.text}</div>
        <div class="options">
          ${q.options.map((opt, i) => {
            const id = `q${index}_${String.fromCharCode(65 + i)}`;
            const checked = userAnswers[index] === String.fromCharCode(65 + i) ? "checked" : "";
            return `
              <input type="radio" id="${id}" name="mcq${index}" value="${String.fromCharCode(65 + i)}" ${checked}>
              <label for="${id}">${String.fromCharCode(65 + i)}) ${opt}</label>
            `;
          }).join("")}
        </div>
      `;

      seenQuestions.add(index);
      
      document.getElementById("backBtn").style.display = index === 0 ? "none" : "inline-block";
      document.getElementById("nextBtn").style.display = index === questions.length - 1 ? "none" : "inline-block";
      document.getElementById("submitBtn").style.display = index === questions.length - 1 ? "inline-block" : "none";
      
      updateNavPanel();
    }

    function updateNavPanel() {
      const questionList = document.getElementById("questionList");
      questionList.innerHTML = '';
      
      questions.forEach((q, index) => {
        const questionItem = document.createElement("div");
        questionItem.className = "question-item";
        questionItem.textContent = index + 1;
        
        if (userAnswers[index]) {
          questionItem.classList.add("answered");
        } else if (seenQuestions.has(index)) {
          questionItem.classList.add("seen");
        } else {
          questionItem.classList.add("not-seen");
        }
        
        if (index === current) {
          questionItem.classList.add("current");
        }
        
        questionItem.onclick = () => {
          saveAnswer();
          current = index;
          renderQuestion(current);
          toggleNavPanel();
        };
        
        questionList.appendChild(questionItem);
      });
    }

    function toggleNavPanel() {
      const navPanel = document.getElementById("navPanel");
      navPanelVisible = !navPanelVisible;
      navPanel.style.display = navPanelVisible ? "block" : "none";
    }

    function nextQuestion() {
      saveAnswer();
      if (current < questions.length - 1) {
        current++;
        renderQuestion(current);
      }
    }

    function prevQuestion() {
      saveAnswer();
      if (current > 0) {
        current--;
        renderQuestion(current);
      }
    }

    function saveAnswer() {
      const selected = document.querySelector(`input[name="mcq${current}"]:checked`);
      if (selected) {
        userAnswers[current] = selected.value;
      }
    }

    function submitQuiz() {
      saveAnswer();
      
      // Generate test name with timestamp
      const now = new Date();
      const testName = `MHT-CET Test ${now.toLocaleDateString()} ${now.toLocaleTimeString()}`;
      
      const endTime = new Date();
      const timeTakenMs = endTime - startTime;
      const timeTakenMin = Math.floor(timeTakenMs / 60000);
      const timeTakenSec = Math.floor((timeTakenMs % 60000) / 1000);

      let correct = 0;
      const results = [];

      questions.forEach((q, i) => {
        const userAns = userAnswers[i] || "Not Answered";
        const isCorrect = userAns === q.correct;
        if (isCorrect) correct++;
        results.push({
          number: q.number,
          userAns,
          correctAns: q.correct,
          isCorrect
        });
      });

      // Create result object
      const resultData = {
        testName: testName,
        total: questions.length,
        correct: correct,
        accuracy: (correct / questions.length * 100).toFixed(2),
        time: `${timeTakenMin} min ${timeTakenSec} sec`,
        timestamp: now.toISOString(),
        details: results
      };

      // Save to localStorage
      try {
        // Get existing scores or initialize empty array
        let scores = JSON.parse(localStorage.getItem("quizScores")) || [];
        
        // Add new score
        scores.push(resultData);
        
        // Save back to localStorage
        localStorage.setItem("quizScores", JSON.stringify(scores));
        
        // Also save the current result for the result page
        localStorage.setItem("quizResults", JSON.stringify(resultData));
        
        // Show save notification
        showNotification();
        
        // Redirect to results page after a short delay
        setTimeout(() => {
          window.location.href = "result.html";
        }, 1500);
      } catch (e) {
        console.error("Error saving results:", e);
        alert("Error saving results. Please try again.");
      }
    }

    function showNotification() {
      const notification = document.getElementById("saveNotification");
      notification.style.display = "flex";
    }

    function hideNotification() {
      const notification = document.getElementById("saveNotification");
      notification.style.display = "none";
    }

    // Initialize the quiz
    renderQuestion(current);

    // Stopwatch Timer
    let minutes = 0, seconds = 0;
    const timerEl = document.getElementById("timer");
    setInterval(() => {
      seconds++;
      if (seconds === 60) {
        seconds = 0;
        minutes++;
      }
      timerEl.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
    }, 1000);
  </script>
</body>
</html>
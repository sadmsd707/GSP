<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MHT-CET Quiz</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #e0f2fe;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    .quiz-container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 20px 25px;
      position: relative;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 14px;
      color: #1e3a8a;
    }
    .header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .header-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .question-number {
      font-weight: bold;
      color: #2563eb;
    }
    .question {
      font-size: 16px;
      margin: 20px 0;
    }
    .options input[type="radio"] {
      display: none;
    }
    .options label {
      display: block;
      background: #eff6ff;
      margin: 8px 0;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      border-left: 4px solid transparent;
    }
    .options input[type="radio"]:checked + label {
      background: #dbeafe;
      border-left: 4px solid #2563eb;
      font-weight: 500;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .btn {
      padding: 10px 20px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
    }
    .btn:hover {
      background: #1e40af;
    }
    .btn.right {
      margin-left: auto;
    }
    
    /* Timer Styling */
    .timer {
      display: flex;
      align-items: center;
      gap: 5px;
      background: #eff6ff;
      padding: 5px 10px;
      border-radius: 4px;
      font-weight: 500;
    }
    
    /* Question Navigation Panel */
    .nav-panel-toggle {
      cursor: pointer;
      font-size: 20px;
      z-index: 10;
      background: #eff6ff;
      padding: 5px 10px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .nav-panel {
      display: none;
      position: absolute;
      top: 50px;
      right: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      padding: 15px;
      z-index: 10;
      width: 250px;
      max-height: 300px;
      overflow-y: auto;
    }
    .nav-panel h3 {
      margin: 0 0 10px 0;
      font-size: 16px;
      color: #2563eb;
      border-bottom: 1px solid #eee;
      padding-bottom: 5px;
    }
    .question-list {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
    }
    .question-item {
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }
    .question-item.answered {
      background: #3b82f6;
      color: white;
    }
    .question-item.seen {
      background: #f87171;
      color: white;
    }
    .question-item.not-seen {
      background: #d1d5db;
      color: #6b7280;
    }
    .question-item.current {
      border: 2px solid #2563eb;
      box-sizing: border-box;
    }
    .question-item:hover {
      transform: scale(1.1);
    }
    
    /* Save notification */
    .save-notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #3b82f6;
      color: white;
      padding: 12px 20px;
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
      display: none;
      align-items: center;
      gap: 10px;
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <div class="header">
      <div class="header-left">
        <div>MHT CET 2025 · Experimental Physics</div>
      </div>
      <div class="header-right">
        <div class="timer">Time: <span id="timer">00:00</span></div>
        <div class="nav-panel-toggle" onclick="toggleNavPanel()">☰</div>
      </div>
    </div>
    
    <div class="nav-panel" id="navPanel">
      <h3>Questions</h3>
      <div class="question-list" id="questionList"></div>
    </div>

    <div id="quiz-content"></div>
    
    <div class="nav-buttons">
      <button class="btn" id="backBtn" onclick="prevQuestion()" style="display:none;">Back</button>
      <button class="btn right" id="nextBtn" onclick="nextQuestion()">Next</button>
      <button class="btn right" id="submitBtn" onclick="submitQuiz()" style="display:none;">Submit</button>
    </div>
  </div>

  <!-- Save notification -->
  <div class="save-notification" id="saveNotification">
    <span>Results saved successfully!</span>
    <button onclick="hideNotification()" style="background: none; border: none; color: white; cursor: pointer; font-size: 16px;">×</button>
  </div>

  <script>
    const questions = [
      {
        number: "Question 01",
        text: "A simple pendulum has a periodic time 'T₁' when it is on the surface of earth of radius 'R'. Its periodic time is 'T₂' when it is taken to a height 'R' above the earth's surface. The value of T₂/T₁ is",
        options: ["2", "√2", "4", "1/√2"],
        correct: "B"
      },
      {
        number: "Question 02",
        text: "A meter scale is supported on a wedge at its centre of gravity. A body of weight 'w' is suspended from the 20 cm mark and another weight of 25 gram is suspended from 74 cm mark balances it and the meter scale remains perfectly horizontal. Neglecting the weight of the meter scale, the weight of the body is",
        options: ["30 g", "45 g", "60 g", "75 g"],
        correct: "B"
      },
      {
        number: "Question 03",
        text: "Two resistance X and Y are connected in the two gaps of a meterbridge and the null points is obtained at 20 cm from zero end. When the resistance of 20Ω is connected in series with the smaller of the two resistance X and Y, the null point shifts to 40 cm from left end. The value of smaller resistance in ohm is",
        options: ["10", "15", "20", "25"],
        correct: "A"
      },
      {
        number: "Question 04",
        text: "In meter bridge experiment, null point was obtained at a distance 'l' from left end. The values of resistances in the left and right gap are doubled and then interchanged. The new position of the null point is",
        options: ["l from left", "1-l from left", "100-l from left", "50 cm"],
        correct: "B"
      },
      {
        number: "Question 05",
        text: "In a meter bridge experiment null point is obtained at l cm from the left end. If the meter bridge wire is replaced by a wire of same material but twice the area of cross-section, then the null point is obtained at a distance",
        options: ["l cm", "2l cm", "l/2 cm", "same position"],
        correct: "A"
      },
      {
        number: "Question 06",
        text: "In a resonance tube experiment, a tuning fork resonates with air column of length 12 cm and again resonates when air column is 38 cm long. The end correction will be",
        options: ["1 cm", "2 cm", "3 cm", "4 cm"],
        correct: "A"
      },
      {
        number: "Question 07",
        text: "A glass convex lens is of refractive index 1.55 with both faces of same radius of curvature. What will be the radius of curvature if focal length is to be 20 cm?",
        options: ["11 cm", "22 cm", "33 cm", "44 cm"],
        correct: "B"
      },
      {
        number: "Question 08",
        text: "Focal length of a convex lens will be maximum for",
        options: ["red light", "violet light", "green light", "yellow light"],
        correct: "A"
      },
      {
        number: "Question 09",
        text: "In Searle's method to find Young's modulus of a wire, when a force of 1.5 kg-wt is applied at its free end, the length of wire is 'a'. When force of 2.5 kg-wt is applied, the length of wire is 'b'. What would be its original length?",
        options: ["(3a - 2b)", "(3b - 2a)", "(5a - 3b)", "(5b - 3a)"],
        correct: "D"
      },
      {
        number: "Question 10",
        text: "With a resistance of 'X' in the left gap and a resistance of 9 Ω in the right gap of meter bridge, the balance point is obtained at 40 cm from the left end. In what way and to which resistance 3Ω resistance be connected to obtained the balance at 50 cm from the left end?",
        options: ["Parallel with X", "Series with X", "Parallel with 9Ω", "Series with 9Ω"],
        correct: "C"
      },
      {
        number: "Question 11",
        text: "Two unknown resistances are connected in two gaps of a meter-bridge. The null point is obtained at 40 cm from left end. A 30 Ω resistance is connected in series with the smaller of the two resistances, the null point shifts by 20 cm to the right end. The value of smaller resistance in Ω is",
        options: ["10", "15", "20", "25"],
        correct: "B"
      },
      {
        number: "Question 12",
        text: "In balanced meter bridge, the resistance of bridge wire is 0.1 Ω cm. Unknown resistance X is connected in left gap and 6 Ω in right gap, null point divides the wire in the ratio 2 : 3. Find the current drawn from the battery of 5 V having negligible resistance.",
        options: ["0.5 A", "1 A", "1.5 A", "2 A"],
        correct: "B"
      }
    ];

    let current = 0;
    const userAnswers = {};
    const seenQuestions = new Set();
    const startTime = new Date();
    let navPanelVisible = false;

    function renderQuestion(index) {
      const q = questions[index];
      const container = document.getElementById("quiz-content");
      container.innerHTML = `
        <div class="question-number">${q.number}</div>
        <div class="question">${q.text}</div>
        <div class="options">
          ${q.options.map((opt, i) => {
            const id = `q${index}_${String.fromCharCode(65 + i)}`;
            const checked = userAnswers[index] === String.fromCharCode(65 + i) ? "checked" : "";
            return `
              <input type="radio" id="${id}" name="mcq${index}" value="${String.fromCharCode(65 + i)}" ${checked}>
              <label for="${id}">${String.fromCharCode(65 + i)}) ${opt}</label>
            `;
          }).join("")}
        </div>
      `;

      seenQuestions.add(index);
      
      document.getElementById("backBtn").style.display = index === 0 ? "none" : "inline-block";
      document.getElementById("nextBtn").style.display = index === questions.length - 1 ? "none" : "inline-block";
      document.getElementById("submitBtn").style.display = index === questions.length - 1 ? "inline-block" : "none";
      
      updateNavPanel();
    }

    function updateNavPanel() {
      const questionList = document.getElementById("questionList");
      questionList.innerHTML = '';
      
      questions.forEach((q, index) => {
        const questionItem = document.createElement("div");
        questionItem.className = "question-item";
        questionItem.textContent = index + 1;
        
        if (userAnswers[index]) {
          questionItem.classList.add("answered");
        } else if (seenQuestions.has(index)) {
          questionItem.classList.add("seen");
        } else {
          questionItem.classList.add("not-seen");
        }
        
        if (index === current) {
          questionItem.classList.add("current");
        }
        
        questionItem.onclick = () => {
          saveAnswer();
          current = index;
          renderQuestion(current);
          toggleNavPanel();
        };
        
        questionList.appendChild(questionItem);
      });
    }

    function toggleNavPanel() {
      const navPanel = document.getElementById("navPanel");
      navPanelVisible = !navPanelVisible;
      navPanel.style.display = navPanelVisible ? "block" : "none";
    }

    function nextQuestion() {
      saveAnswer();
      if (current < questions.length - 1) {
        current++;
        renderQuestion(current);
      }
    }

    function prevQuestion() {
      saveAnswer();
      if (current > 0) {
        current--;
        renderQuestion(current);
      }
    }

    function saveAnswer() {
      const selected = document.querySelector(`input[name="mcq${current}"]:checked`);
      if (selected) {
        userAnswers[current] = selected.value;
      }
    }

    function submitQuiz() {
      saveAnswer();
      
      // Generate test name with timestamp
      const now = new Date();
      const testName = `MHT-CET Test ${now.toLocaleDateString()} ${now.toLocaleTimeString()}`;
      
      const endTime = new Date();
      const timeTakenMs = endTime - startTime;
      const timeTakenMin = Math.floor(timeTakenMs / 60000);
      const timeTakenSec = Math.floor((timeTakenMs % 60000) / 1000);

      let correct = 0;
      const results = [];

      questions.forEach((q, i) => {
        const userAns = userAnswers[i] || "Not Answered";
        const isCorrect = userAns === q.correct;
        if (isCorrect) correct++;
        results.push({
          number: q.number,
          userAns,
          correctAns: q.correct,
          isCorrect
        });
      });

      // Create result object
      const resultData = {
        testName: testName,
        total: questions.length,
        correct: correct,
        accuracy: (correct / questions.length * 100).toFixed(2),
        time: `${timeTakenMin} min ${timeTakenSec} sec`,
        timestamp: now.toISOString(),
        details: results
      };

      // Save to localStorage
      try {
        // Get existing scores or initialize empty array
        let scores = JSON.parse(localStorage.getItem("quizScores")) || [];
        
        // Add new score
        scores.push(resultData);
        
        // Save back to localStorage
        localStorage.setItem("quizScores", JSON.stringify(scores));
        
        // Also save the current result for the result page
        localStorage.setItem("quizResults", JSON.stringify(resultData));
        
        // Show save notification
        showNotification();
        
        // Redirect to results page after a short delay
        setTimeout(() => {
          window.location.href = "MCCW-PRC32.html";
        }, 1500);
      } catch (e) {
        console.error("Error saving results:", e);
        alert("Error saving results. Please try again.");
      }
    }

    function showNotification() {
      const notification = document.getElementById("saveNotification");
      notification.style.display = "flex";
    }

    function hideNotification() {
      const notification = document.getElementById("saveNotification");
      notification.style.display = "none";
    }

    // Initialize the quiz
    renderQuestion(current);

    // Stopwatch Timer
    let minutes = 0, seconds = 0;
    const timerEl = document.getElementById("timer");
    setInterval(() => {
      seconds++;
      if (seconds === 60) {
        seconds = 0;
        minutes++;
      }
      timerEl.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
    }, 1000);
  </script>
</body>
</html>